window.dhtmlXTooltip=scheduler.dhtmlXTooltip=window.dhtmlxTooltip={},dhtmlXTooltip.config={className:"dhtmlXTooltip tooltip",timeout_to_display:50,timeout_to_hide:50,delta_x:15,delta_y:-20},dhtmlXTooltip.tooltip=document.createElement("div"),dhtmlXTooltip.tooltip.className=dhtmlXTooltip.config.className,dhtmlXTooltip.show=function(t,e){if(!scheduler.config.touch||scheduler.config.touch_tooltip){var o=dhtmlXTooltip,i=this.tooltip.style;o.tooltip.className=o.config.className;var l=this.position(t),d=t.target||t.srcElement;if(!this.isTooltip(d)){var r=l.x+(o.config.delta_x||0),n=l.y-(o.config.delta_y||0);i.visibility="hidden",i.removeAttribute?(i.removeAttribute("right"),i.removeAttribute("bottom")):(i.removeProperty("right"),i.removeProperty("bottom")),i.left="0",i.top="0",this.tooltip.innerHTML=e,document.body.appendChild(this.tooltip);var a=this.tooltip.offsetWidth,s=this.tooltip.offsetHeight;document.body.offsetWidth-r-a<0?(i.removeAttribute?i.removeAttribute("left"):i.removeProperty("left"),i.right=document.body.offsetWidth-r+2*(o.config.delta_x||0)+"px"):i.left=r<0?l.x+Math.abs(o.config.delta_x||0)+"px":r+"px",document.body.offsetHeight-n-s<0?(i.removeAttribute?i.removeAttribute("top"):i.removeProperty("top"),i.bottom=document.body.offsetHeight-n-2*(o.config.delta_y||0)+"px"):i.top=n<0?l.y+Math.abs(o.config.delta_y||0)+"px":n+"px",i.visibility="visible",this.tooltip.onmouseleave=function(t){t=t||window.event;for(var e=scheduler.dhtmlXTooltip,o=t.relatedTarget;o!=scheduler._obj&&o;)o=o.parentNode;o!=scheduler._obj&&e.delay(e.hide,e,[],e.config.timeout_to_hide)},scheduler.callEvent("onTooltipDisplayed",[this.tooltip,this.tooltip.event_id])}}},dhtmlXTooltip._clearTimeout=function(){this.tooltip._timeout_id&&window.clearTimeout(this.tooltip._timeout_id)},dhtmlXTooltip.hide=function(){if(this.tooltip.parentNode){var t=this.tooltip.event_id;this.tooltip.event_id=null,this.tooltip.onmouseleave=null,this.tooltip.parentNode.removeChild(this.tooltip),scheduler.callEvent("onAfterTooltip",[t])}this._clearTimeout()},dhtmlXTooltip.delay=function(e,o,i,t){this._clearTimeout(),this.tooltip._timeout_id=setTimeout(function(){var t=e.apply(o,i);return e=o=i=null,t},t||this.config.timeout_to_display)},dhtmlXTooltip.isTooltip=function(t){var e=!1;for(t.className.split(" ")[0];t&&!e;)e=t.className==this.tooltip.className,t=t.parentNode;return e},dhtmlXTooltip.position=function(t){if((t=t||window.event).pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=window._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}},scheduler.attachEvent("onMouseMove",function(t,e){var o=window.event||e,i=o.target||o.srcElement,l=dhtmlXTooltip,d=l.isTooltip(i),r=l.isTooltipTarget&&l.isTooltipTarget(i);if(t||d||r){var n,a;if(t||l.tooltip.event_id){var s=scheduler.getEvent(t)||scheduler.getEvent(l.tooltip.event_id);if(!s)return;if(l.tooltip.event_id=s.id,!(n=scheduler.templates.tooltip_text(s.start_date,s.end_date,s)))return l.hide()}if(r&&(n=""),_isIE)for(var p in a={pageX:void 0,pageY:void 0,clientX:void 0,clientY:void 0,target:void 0,srcElement:void 0})a[p]=o[p];if(!scheduler.callEvent("onBeforeTooltip",[t])||!n)return;l.delay(l.show,l,[a||o,n])}else l.delay(l.hide,l,[],l.config.timeout_to_hide)}),scheduler.attachEvent("onBeforeDrag",function(){return dhtmlXTooltip.hide(),!0}),scheduler.attachEvent("onEventDeleted",function(){return dhtmlXTooltip.hide(),!0}),scheduler.templates.tooltip_date_format=scheduler.date.date_to_str("%Y-%m-%d %H:%i"),scheduler.templates.tooltip_text=function(t,e,o){return"<b>Event:</b> "+o.text+"<br/><b>Start date:</b> "+scheduler.templates.tooltip_date_format(t)+"<br/><b>End date:</b> "+scheduler.templates.tooltip_date_format(e)};